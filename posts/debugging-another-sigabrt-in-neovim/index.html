<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Debugging another SIGABRT in neovim | blog.nerd.rocks</title><meta name=keywords content="neovim,nix,debugging"><meta name=description content="In the last blog article I described a way how to debug SIGABRT crashes in neovim with the help of a nix shell.
It helped me to find out the cause of the crashes in neovim 0.5.0 and an already existing issue in the github project, which already provided a solution.
Unfortunately, since a few weeks, I experience crashes in neovim again.
Most of the time when using telescope with the preview, neovim randomly crashes.
However, when running :checkhealth, the crash occurs in the same way."><meta name=author content><link rel=canonical href=https://blog.nerd.rocks/posts/debugging-another-sigabrt-in-neovim/><link crossorigin=anonymous href=/assets/css/stylesheet.612c040e31fe00fa2ca5f8aac43a14a61a45660cba47508c405a83f91e0f64f6.css integrity="sha256-YSwEDjH+APospfiqxDoUphpFZgy6R1CMQFqD+R4PZPY=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.nerd.rocks/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.nerd.rocks/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.nerd.rocks/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.nerd.rocks/apple-touch-icon.png><link rel=mask-icon href=https://blog.nerd.rocks/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.nerd.rocks/posts/debugging-another-sigabrt-in-neovim/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://blog.nerd.rocks/posts/debugging-another-sigabrt-in-neovim/"><meta property="og:site_name" content="blog.nerd.rocks"><meta property="og:title" content="Debugging another SIGABRT in neovim"><meta property="og:description" content="In the last blog article I described a way how to debug SIGABRT crashes in neovim with the help of a nix shell. It helped me to find out the cause of the crashes in neovim 0.5.0 and an already existing issue in the github project, which already provided a solution. Unfortunately, since a few weeks, I experience crashes in neovim again. Most of the time when using telescope with the preview, neovim randomly crashes. However, when running :checkhealth, the crash occurs in the same way."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-22T12:05:02+02:00"><meta property="article:modified_time" content="2022-05-22T12:05:02+02:00"><meta property="article:tag" content="Neovim"><meta property="article:tag" content="Nix"><meta property="article:tag" content="Debugging"><meta name=twitter:card content="summary"><meta name=twitter:title content="Debugging another SIGABRT in neovim"><meta name=twitter:description content="In the last blog article I described a way how to debug SIGABRT crashes in neovim with the help of a nix shell.
It helped me to find out the cause of the crashes in neovim 0.5.0 and an already existing issue in the github project, which already provided a solution.
Unfortunately, since a few weeks, I experience crashes in neovim again.
Most of the time when using telescope with the preview, neovim randomly crashes.
However, when running :checkhealth, the crash occurs in the same way."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nerd.rocks/posts/"},{"@type":"ListItem","position":2,"name":"Debugging another SIGABRT in neovim","item":"https://blog.nerd.rocks/posts/debugging-another-sigabrt-in-neovim/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Debugging another SIGABRT in neovim","name":"Debugging another SIGABRT in neovim","description":"In the last blog article I described a way how to debug SIGABRT crashes in neovim with the help of a nix shell. It helped me to find out the cause of the crashes in neovim 0.5.0 and an already existing issue in the github project, which already provided a solution. Unfortunately, since a few weeks, I experience crashes in neovim again. Most of the time when using telescope with the preview, neovim randomly crashes. However, when running :checkhealth, the crash occurs in the same way.\n","keywords":["neovim","nix","debugging"],"articleBody":"In the last blog article I described a way how to debug SIGABRT crashes in neovim with the help of a nix shell. It helped me to find out the cause of the crashes in neovim 0.5.0 and an already existing issue in the github project, which already provided a solution. Unfortunately, since a few weeks, I experience crashes in neovim again. Most of the time when using telescope with the preview, neovim randomly crashes. However, when running :checkhealth, the crash occurs in the same way.\nIn order to debug the issue, the first approach would be to check the Console application since I’m using macOS. The stacktrace from Console should provide enough information to find the root cause of the crashes. Unlike the last error that cause SIGABRT crashes, the stacktrace does not useful information, as the following screenshot depicts.\nThis requires another approach to find out more debug information. For this, I’ve created another shell.nix with the current version of neovim and a debugging build of the current released version and the latest nightly version. Since the error also occurs in the nightly version, debugging in it is more useful since it simplifies contributing a fix to the neovim project. The following shell.nix will compile the current nightly on macOS.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 { pkgs ? import { overlays = [ (self: super: { neovim-dev = (super.pkgs.neovim-unwrapped.override {}).overrideAttrs(oa:{ # use the latest stable neovim version = \"master\"; src = pkgs.fetchFromGitHub { owner = \"neovim\"; repo = \"neovim\"; rev = \"master\"; sha256 = \"YfPM6yjKWu4RPAtLefggWC0ZOGgbcPsk6VT5M3D41B0=\"; }; # use the debug type to enable debug symbols cmakeBuildType=\"debug\"; buildInputs = super.pkgs.neovim-unwrapped.buildInputs ++ [ pkgs.darwin.apple_sdk.frameworks.CoreServices ]; shellHook = '' export NVIM_PYTHON_LOG_LEVEL=DEBUG export NVIM_LOG_FILE=/tmp/log ''; }); }) ]; }}: pkgs.mkShell { nativeBuildInputs = with pkgs; [ neovim-dev ]; } Starting neovim with nvim -u NONE for starting with an empty config and running the healthcheck will result in the SIGABRT again. Since the debugging build does not provide a stacktrace with more information, we need to use lldb, a debugger on macOS, to further find the cause. Therefore we need to start the process with lldb nvim. This starts lldb with nvim as target and provides an interactive shell.\nStarting neovim with run (or r if you’re lazy like me) will execute neovim and we are able to reproduce the crash again. After neovim crashes, lldb provides short trace where the program actually crashed. Since we want to analyze the complete stacktrace, we need to run bt, which provides a complete stacktrace, that is depicted in the following screenshot.\nAnalyzing the stacktrace, we are able to examine the last function in neovim, that was executed: nvim'tslua_add_language. This function can be found in a file called treesitter.c and is responsible for the treesitter integration. Due to the name of the function and its content, we can examine, that it loads configured and already existing parsers.\nWhen we further anlyze the stacktrace and watch out for functions that do not belong to the standard libraries, we are able to find the markdown.so'_GLOBAL__sub_I_scanner.c. It provides a hint to the markdown treesitter parser, which actually consists of a scanner.cc file.\nIn order to test, if the parser causes the crashes, we uninstall it with :TSUninstall markdown and the run :checkhealth agian. Suprisingly, neovim does not cash anymore! As a quick fix, we can now remove the parser from the configuration and neovim should (hopefully) run stable again.\n","wordCount":"602","inLanguage":"en","datePublished":"2022-05-22T12:05:02+02:00","dateModified":"2022-05-22T12:05:02+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nerd.rocks/posts/debugging-another-sigabrt-in-neovim/"},"publisher":{"@type":"Organization","name":"blog.nerd.rocks","logo":{"@type":"ImageObject","url":"https://blog.nerd.rocks/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.nerd.rocks/ accesskey=h title="blog.nerd.rocks (Alt + H)">blog.nerd.rocks</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.nerd.rocks/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.nerd.rocks/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.nerd.rocks/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent" id=f08f40d7f68ac7ba82decada43bb585f>Debugging another SIGABRT in neovim</h1><div class=post-meta><span title='2022-05-22 12:05:02 +0200 +0200'>2022-05-22</span></div></header><div class=post-content><p>In the last blog article I described a way how to debug SIGABRT crashes in neovim with the help of a nix shell.
It helped me to find out the cause of the crashes in neovim 0.5.0 and an already existing issue in the github project, which already provided a solution.
Unfortunately, since a few weeks, I experience crashes in neovim again.
Most of the time when using telescope with the preview, neovim randomly crashes.
However, when running <code>:checkhealth</code>, the crash occurs in the same way.</p><p>In order to debug the issue, the first approach would be to check the <code>Console</code> application since I&rsquo;m using macOS.
The stacktrace from <code>Console</code> should provide enough information to find the root cause of the crashes.
Unlike the last error that cause SIGABRT crashes, the stacktrace does not useful information, as the following screenshot depicts.</p><p><img alt="crash report" loading=lazy src=/img/debugging-another-sigabrt-in-neovim/console.png></p><p>This requires another approach to find out more debug information.
For this, I&rsquo;ve created another <code>shell.nix</code> with the current version of neovim and a debugging build of the current released version and the latest nightly version.
Since the error also occurs in the nightly version, debugging in it is more useful since it simplifies contributing a fix to the neovim project.
The following <code>shell.nix</code> will compile the current nightly on macOS.</p><div class=highlight><div style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">35
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-nix data-lang=nix><span style=display:flex><span>{ pkgs <span style=color:#89dceb;font-weight:700>?</span> <span style=color:#94e2d5>import</span> <span style=color:#94e2d5>&lt;nixpkgs&gt;</span> { 
</span></span><span style=display:flex><span>  overlays <span style=color:#89dceb;font-weight:700>=</span> [
</span></span><span style=display:flex><span>    (self: super: {
</span></span><span style=display:flex><span>      neovim-dev <span style=color:#89dceb;font-weight:700>=</span> (super<span style=color:#89dceb;font-weight:700>.</span>pkgs<span style=color:#89dceb;font-weight:700>.</span>neovim-unwrapped<span style=color:#89dceb;font-weight:700>.</span>override {})<span style=color:#89dceb;font-weight:700>.</span>overrideAttrs(oa:{
</span></span><span style=display:flex><span>        <span style=color:#6c7086;font-style:italic># use the latest stable neovim</span>
</span></span><span style=display:flex><span>        version <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;master&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        src <span style=color:#89dceb;font-weight:700>=</span> pkgs<span style=color:#89dceb;font-weight:700>.</span>fetchFromGitHub {
</span></span><span style=display:flex><span>          owner <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;neovim&#34;</span>;
</span></span><span style=display:flex><span>          repo <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;neovim&#34;</span>;
</span></span><span style=display:flex><span>          rev <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;master&#34;</span>;
</span></span><span style=display:flex><span>          sha256 <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;YfPM6yjKWu4RPAtLefggWC0ZOGgbcPsk6VT5M3D41B0=&#34;</span>;
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#6c7086;font-style:italic># use the debug type to enable debug symbols</span>
</span></span><span style=display:flex><span>        cmakeBuildType<span style=color:#89dceb;font-weight:700>=</span><span style=color:#a6e3a1>&#34;debug&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        buildInputs <span style=color:#89dceb;font-weight:700>=</span> super<span style=color:#89dceb;font-weight:700>.</span>pkgs<span style=color:#89dceb;font-weight:700>.</span>neovim-unwrapped<span style=color:#89dceb;font-weight:700>.</span>buildInputs <span style=color:#89dceb;font-weight:700>++</span> [
</span></span><span style=display:flex><span>          pkgs<span style=color:#89dceb;font-weight:700>.</span>darwin<span style=color:#89dceb;font-weight:700>.</span>apple_sdk<span style=color:#89dceb;font-weight:700>.</span>frameworks<span style=color:#89dceb;font-weight:700>.</span>CoreServices
</span></span><span style=display:flex><span>        ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        shellHook <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#a6e3a1>          export NVIM_PYTHON_LOG_LEVEL=DEBUG
</span></span></span><span style=display:flex><span><span style=color:#a6e3a1>          export NVIM_LOG_FILE=/tmp/log
</span></span></span><span style=display:flex><span><span style=color:#a6e3a1>        &#39;&#39;</span>;
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>}}:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pkgs<span style=color:#89dceb;font-weight:700>.</span>mkShell {
</span></span><span style=display:flex><span>  nativeBuildInputs <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#cba6f7>with</span> pkgs; [
</span></span><span style=display:flex><span>    neovim-dev
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Starting neovim with <code>nvim -u NONE</code> for starting with an empty config and running the healthcheck will result in the SIGABRT again.
Since the debugging build does not provide a stacktrace with more information, we need to use <code>lldb</code>, a debugger on macOS, to further find the cause.
Therefore we need to start the process with <code>lldb nvim</code>.
This starts <code>lldb</code> with <code>nvim</code> as target and provides an interactive shell.</p><p>Starting neovim with <code>run</code> (or <code>r</code> if you&rsquo;re lazy like me) will execute neovim and we are able to reproduce the crash again.
After neovim crashes, <code>lldb</code> provides short trace where the program actually crashed.
Since we want to analyze the complete stacktrace, we need to run <code>bt</code>, which provides a complete stacktrace, that is depicted in the following screenshot.</p><p><img alt=backtrace loading=lazy src=/img/debugging-another-sigabrt-in-neovim/bt.png></p><p>Analyzing the stacktrace, we are able to examine the last function in neovim, that was executed: <code>nvim'tslua_add_language</code>.
This function can be found in a file called <code>treesitter.c</code> and is responsible for the treesitter integration.
Due to the name of the function and its content, we can examine, that it loads configured and already existing parsers.</p><p>When we further anlyze the stacktrace and watch out for functions that do not belong to the standard libraries, we are able to find the <code>markdown.so'_GLOBAL__sub_I_scanner.c</code>.
It provides a hint to the markdown treesitter parser, which actually consists of a <code>scanner.cc</code> file.</p><p>In order to test, if the parser causes the crashes, we uninstall it with <code>:TSUninstall markdown</code> and the run <code>:checkhealth</code> agian.
Suprisingly, neovim does not cash anymore!
As a quick fix, we can now remove the parser from the configuration and neovim should (hopefully) run stable again.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.nerd.rocks/tags/neovim/>Neovim</a></li><li><a href=https://blog.nerd.rocks/tags/nix/>Nix</a></li><li><a href=https://blog.nerd.rocks/tags/debugging/>Debugging</a></li></ul><nav class=paginav><a class=prev href=https://blog.nerd.rocks/posts/state-of-samesite-in-firefox-and-chrome/><span class=title>« Prev</span><br><span>State of SameSite cookies in Firefox and Chromium</span>
</a><a class=next href=https://blog.nerd.rocks/posts/debugging-with-nix-shell/><span class=title>Next »</span><br><span>Debugging neovim with nix shell</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://blog.nerd.rocks/>blog.nerd.rocks</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>