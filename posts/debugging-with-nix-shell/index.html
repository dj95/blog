<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Debugging neovim with nix shell | blog.nerd.rocks</title><meta name=keywords content="neovim,nix,debugging"><meta name=description content="Since the introduction of the new lua api in neovim 0.5.0 there are plenty new vim plugins based on this api. While testing some of the new plugins, my neovim exited with a SIGSEGV and sometime with a SIGABRT in specific workflows. As these crashes are reproducible, it should be easy to debug the problem. However, we need a debug build of neovim and, since I&rsquo;m using macOS, the stack trace of neovim."><meta name=author content><link rel=canonical href=https://blog.nerd.rocks/posts/debugging-with-nix-shell/><link crossorigin=anonymous href=/assets/css/stylesheet.706230b2c01b2f9cec39f070771415c37f76ed4d690dae0d9f25fa66dfb55d9e.css integrity="sha256-cGIwssAbL5zsOfBwdxQVw3927U1pDa4NnyX6Zt+1XZ4=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.nerd.rocks/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.nerd.rocks/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.nerd.rocks/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.nerd.rocks/apple-touch-icon.png><link rel=mask-icon href=https://blog.nerd.rocks/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Debugging neovim with nix shell"><meta property="og:description" content="Since the introduction of the new lua api in neovim 0.5.0 there are plenty new vim plugins based on this api. While testing some of the new plugins, my neovim exited with a SIGSEGV and sometime with a SIGABRT in specific workflows. As these crashes are reproducible, it should be easy to debug the problem. However, we need a debug build of neovim and, since I&rsquo;m using macOS, the stack trace of neovim."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.nerd.rocks/posts/debugging-with-nix-shell/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-09T12:05:02+02:00"><meta property="article:modified_time" content="2021-10-09T12:05:02+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Debugging neovim with nix shell"><meta name=twitter:description content="Since the introduction of the new lua api in neovim 0.5.0 there are plenty new vim plugins based on this api. While testing some of the new plugins, my neovim exited with a SIGSEGV and sometime with a SIGABRT in specific workflows. As these crashes are reproducible, it should be easy to debug the problem. However, we need a debug build of neovim and, since I&rsquo;m using macOS, the stack trace of neovim."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nerd.rocks/posts/"},{"@type":"ListItem","position":2,"name":"Debugging neovim with nix shell","item":"https://blog.nerd.rocks/posts/debugging-with-nix-shell/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Debugging neovim with nix shell","name":"Debugging neovim with nix shell","description":"Since the introduction of the new lua api in neovim 0.5.0 there are plenty new vim plugins based on this api. While testing some of the new plugins, my neovim exited with a SIGSEGV and sometime with a SIGABRT in specific workflows. As these crashes are reproducible, it should be easy to debug the problem. However, we need a debug build of neovim and, since I\u0026rsquo;m using macOS, the stack trace of neovim.","keywords":["neovim","nix","debugging"],"articleBody":"Since the introduction of the new lua api in neovim 0.5.0 there are plenty new vim plugins based on this api. While testing some of the new plugins, my neovim exited with a SIGSEGV and sometime with a SIGABRT in specific workflows. As these crashes are reproducible, it should be easy to debug the problem. However, we need a debug build of neovim and, since I’m using macOS, the stack trace of neovim.\nmacOS offers an application called Console, which captures and stores all stack traces of crashed applications. After opening the application, we should find the neovim crashes under the Crash Reports tab.\nDepending on the installation, these crash reports might already contain debug symbols which allows me to examine the root cause. If this is not the case or you want to dig deeper and step through neovim with a debugger, to completely understand the root cause and not only the function in which the error occurs, you need a debug build of neovim.\nSince I do not want to use the debug build as my daily driver and simplify the build process to quickly spin up a debug build in case another error occurs, I utilize nix. Nix enables a declarative way to specify installed packages and allows me to override attributes in these packages. In addition, with nix these packages can be accesses in a separate shell environment instead of installing them in the $PATH of the system.\nFor this shell, a shell.nix file is required, that specifies the required environment. Hence I want to debug neovim, it contains the installation candidate for neovim. However, the neovim package is extended and configured with an overlay. This overlay overrides the version of neovim and enables the debugging build with cmakeBuildType=\"debug\". The following code block depicts the shell.nix that can be used to debug neovim.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 { pkgs ? import { overlays = [ (self: super: { neovim-dev = (super.pkgs.neovim-unwrapped.override {}).overrideAttrs(oa:{ # use the latest stable neovim version = \"0.5.0\"; src = pkgs.fetchFromGitHub { owner = \"neovim\"; repo = \"neovim\"; rev = \"v0.5.0\"; sha256 = \"0aXo8f1YGEI8PkLDOSgxqQy7qK031R+eapCppUFy61E\"; }; # use the debug type to enable debug symbols cmakeBuildType=\"debug\"; shellHook = '' export NVIM_PYTHON_LOG_LEVEL=DEBUG export NVIM_LOG_FILE=/tmp/log ''; }); }) ]; }}: pkgs.mkShell { nativeBuildInputs = [ pkgs.neovim-dev ]; } When nix-shell is exexuted in the same directory as the preceeding shell.nix, neovim will be built with the specified configuration. To verify that nix-shell build the debug vesion, nvim --version should show debug as the build type.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 $ nvim --version NVIM v0.5.1 Build type: Release LuaJIT 2.1.0-beta3 Compilation: Compiled by _nixbld1 $ nix-shell # ... some build output [nix-shell] $ nvim --version NVIM v0.5.1 Build type: debug LuaJIT 2.1.0-beta3 Compilation: Compiled by daniel ","wordCount":"499","inLanguage":"en","datePublished":"2021-10-09T12:05:02+02:00","dateModified":"2021-10-09T12:05:02+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nerd.rocks/posts/debugging-with-nix-shell/"},"publisher":{"@type":"Organization","name":"blog.nerd.rocks","logo":{"@type":"ImageObject","url":"https://blog.nerd.rocks/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nerd.rocks accesskey=h title="blog.nerd.rocks (Alt + H)">blog.nerd.rocks</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.nerd.rocks/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.nerd.rocks/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.nerd.rocks/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Debugging neovim with nix shell</h1><div class=post-meta><span title='2021-10-09 12:05:02 +0200 +0200'>2021-10-09</span></div></header><div class=post-content><p>Since the introduction of the new lua api in neovim 0.5.0 there are plenty new vim plugins based on this api.
While testing some of the new plugins, my neovim exited with a <code>SIGSEGV</code> and sometime with a <code>SIGABRT</code> in specific workflows.
As these crashes are reproducible, it should be easy to debug the problem.
However, we need a debug build of neovim and, since I&rsquo;m using macOS, the stack trace of neovim.</p><p>macOS offers an application called <code>Console</code>, which captures and stores all stack traces of crashed applications.
After opening the application, we should find the neovim crashes under the <code>Crash Reports</code> tab.</p><p><img loading=lazy src=/img/debug-nvim-with-nix/console.png alt="crash report"></p><p>Depending on the installation, these crash reports might already contain debug symbols which allows me to examine the root cause.
If this is not the case or you want to dig deeper and step through neovim with a debugger, to completely understand the root cause and not only the function in which the error occurs, you need a debug build of neovim.</p><p>Since I do not want to use the debug build as my daily driver and simplify the build process to quickly spin up a debug build in case another error occurs, I utilize <a href=://nixos.org>nix</a>.
Nix enables a declarative way to specify installed packages and allows me to override attributes in these packages.
In addition, with nix these packages can be accesses in a separate shell environment instead of installing them in the <code>$PATH</code> of the system.</p><p>For this shell, a <code>shell.nix</code> file is required, that specifies the required environment.
Hence I want to debug neovim, it contains the installation candidate for neovim.
However, the neovim package is extended and configured with an overlay.
This overlay overrides the version of neovim and enables the debugging build with <code>cmakeBuildType="debug"</code>.
The following code block depicts the <code>shell.nix</code> that can be used to debug neovim.</p><div class=highlight><div style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">31
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>{ pkgs <span style=color:#89dceb;font-weight:700>?</span> <span style=color:#94e2d5>import</span> <span style=color:#94e2d5>&lt;nixpkgs&gt;</span> { 
</span></span><span style=display:flex><span>  overlays <span style=color:#89dceb;font-weight:700>=</span> [
</span></span><span style=display:flex><span>    (self: super: {
</span></span><span style=display:flex><span>      neovim-dev <span style=color:#89dceb;font-weight:700>=</span> (super<span style=color:#89dceb;font-weight:700>.</span>pkgs<span style=color:#89dceb;font-weight:700>.</span>neovim-unwrapped<span style=color:#89dceb;font-weight:700>.</span>override {})<span style=color:#89dceb;font-weight:700>.</span>overrideAttrs(oa:{
</span></span><span style=display:flex><span>        <span style=color:#6c7086;font-style:italic># use the latest stable neovim</span>
</span></span><span style=display:flex><span>        version <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;0.5.0&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        src <span style=color:#89dceb;font-weight:700>=</span> pkgs<span style=color:#89dceb;font-weight:700>.</span>fetchFromGitHub {
</span></span><span style=display:flex><span>          owner <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;neovim&#34;</span>;
</span></span><span style=display:flex><span>          repo <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;neovim&#34;</span>;
</span></span><span style=display:flex><span>          rev <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;v0.5.0&#34;</span>;
</span></span><span style=display:flex><span>          sha256 <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#34;0aXo8f1YGEI8PkLDOSgxqQy7qK031R+eapCppUFy61E&#34;</span>;
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#6c7086;font-style:italic># use the debug type to enable debug symbols</span>
</span></span><span style=display:flex><span>        cmakeBuildType<span style=color:#89dceb;font-weight:700>=</span><span style=color:#a6e3a1>&#34;debug&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        shellHook <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#a6e3a1>          export NVIM_PYTHON_LOG_LEVEL=DEBUG
</span></span></span><span style=display:flex><span><span style=color:#a6e3a1>          export NVIM_LOG_FILE=/tmp/log
</span></span></span><span style=display:flex><span><span style=color:#a6e3a1>        &#39;&#39;</span>;
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>}}:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pkgs<span style=color:#89dceb;font-weight:700>.</span>mkShell {
</span></span><span style=display:flex><span>  nativeBuildInputs <span style=color:#89dceb;font-weight:700>=</span> [
</span></span><span style=display:flex><span>    pkgs<span style=color:#89dceb;font-weight:700>.</span>neovim-dev
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>When <code>nix-shell</code> is exexuted in the same directory as the preceeding <code>shell.nix</code>, neovim will be built with the specified configuration.
To verify that nix-shell build the debug vesion, <code>nvim --version</code> should show <code>debug</code> as the build type.</p><div class=highlight><div style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ nvim --version
</span></span><span style=display:flex><span>NVIM v0.5.1
</span></span><span style=display:flex><span>Build type: Release
</span></span><span style=display:flex><span>LuaJIT 2.1.0-beta3
</span></span><span style=display:flex><span>Compilation: 
</span></span><span style=display:flex><span>Compiled by _nixbld1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ nix-shell
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic># ... some build output</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#89dceb;font-weight:700>[</span>nix-shell<span style=color:#89dceb;font-weight:700>]</span> $ nvim --version
</span></span><span style=display:flex><span>NVIM v0.5.1
</span></span><span style=display:flex><span>Build type: debug
</span></span><span style=display:flex><span>LuaJIT 2.1.0-beta3
</span></span><span style=display:flex><span>Compilation: 
</span></span><span style=display:flex><span>Compiled by daniel
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.nerd.rocks/tags/neovim/>neovim</a></li><li><a href=https://blog.nerd.rocks/tags/nix/>nix</a></li><li><a href=https://blog.nerd.rocks/tags/debugging/>debugging</a></li></ul><nav class=paginav><a class=prev href=https://blog.nerd.rocks/posts/debugging-another-sigabrt-in-neovim/><span class=title>« Prev</span><br><span>Debugging another SIGABRT in neovim</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.nerd.rocks>blog.nerd.rocks</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>